# 《UNIX环境高级编程》第一章学习笔记
1. 文件系统：UNIX文件系统是目录和文件的一种层次结构，所有东西的起点是根目录，这个目录的名字是“/”。
2. 目录：目录是一个包含目录项的文件，可以认为每个目录项都包含一个文件名，同时还有说明该文件属性的信息。文件属性指文件类型，文件大小，文件所有者，文件权限以及修改时间等。
3. 文件名：目录中的各个名字为文件名，斜线和空字符不能出现在文件名中，POSIX.1将文件名限制在以下字符集之内：字母，数字，点，短横线，下划线。创建目录时会自动创建两个文件名".",".."分别表示当前目录和上一级目录。在根目录中这两个意义相同。
4. 路径名：有斜线分隔的一个或多个文件名组成的序列，以斜线开头的成为绝对路径，否则为相对路径。
5. opendir函数返回指向DIR结构的指针，将这个指针传递给readdir函数，然后在循环中使用readdir函数读取每个目录项。readdir返回一个指向dirent结构的指针，当前目录中无目录项是返回NULL，使用目录项的名字d_name，可以调用stat函数获取这个文件的所有属性。

### 文件描述符（file descriptor）
   文件描述符通常是一个小的非负整数，内核用以标记一个特定进程正在使用的文件。当内核打开或者创建一个文件的时候都会返回一个文件描述符，读写这个文件时可以使用这个文件描述符。

### 标准输入，标准输出，标准错误（stdin, stdout, stderr）
   一个新程序运行时，shell都会为其打开三个文件描述符，标准输入（standard input），标准输出（standard output），标准错误（standard error）。如果不做处理，这三个描述符都连向终端，使用shell可以将这三个描述符重定向到某个文件。

### 不带缓冲的I/O
   函数open，write，read，lseek，close提供了不带缓冲的I/O，这些函数都使用文件描述符。

6. 头文件<unistd.h>包含了很多UNIX系统服务的函数原型，例如read和write。
7. STDIN_FILENO和STDOUT_FILENO定义在<unistd.h>中，制定了标准输入和标准输出的文件描述符，POSIX中它们的值为0，1.
8. read函数返回读取到的字节数，读到文件尾端时返回0，出现错误返回-1.
### 标准I/O为那些不带缓冲的I/O提供了一个带缓冲的接口
   使用标准I/O简化了对输入行的处理。
### 程序（program）
   程序是储存在磁盘上的可执行文件，内核使用exec函数（共有7个）将程序读入内存并执行。
### 进程 （process）
   程序的执行实例被称为进程。UNIX系统保证每个进程都有一个唯一的数字标识，成为进程ID（process ID），进程ID总是一个非负整数。

9. getpid函数返回当前进程的PID。
10. fork函数创建一个新的进程，称为子进程，调用进程称为父进程，fork函数调用一次但返回两次，在父进程中返回新创建的子进程的进程ID，在子进程中返回0。子进程是父进程的副本，所以他将获得父进程的数据空间，堆，栈等资源的副本（子进程持有的是上述资源的副本），父子进程间不共享这些储存空间。
### fork函数返回两次的原因
   UNIX将复制父进程的地址空间内容给子进程，因此子进程拥有独立的地址空间。由于在负值时复制了父进程的堆栈段，所以两个进程都停留在fork函数中，等待返回，因此fork函数会分别在父进程和子进程中返回。
### 线程和线程ID
   通常一个进程只有一个控制线（thread）--某一时刻执行的一组机器指令。对于某些问题，如果有多个控制线程分别作用于它的不同部分，这个问题解决起来就容易很多，而且多个控制线程可以充分利用多处理器系统的并行能力。
   一个进程内的所有线程共享同一地址空间，文件描述符，栈以及进程相关的属性。因为他们能访问同一个储存区，所以个线程在访问共享数据时要采取同步措施以避免不一致性。
   线程也用ID标识，但是线程ID只在他所属的进程内起作用，一个进程中的线程ID在另一个进程中没有意义。
